(this["webpackJsonpprueba-tecnica"]=this["webpackJsonpprueba-tecnica"]||[]).push([[0],{29:function(e,a,t){e.exports=t(67)},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},55:function(e,a,t){},56:function(e,a,t){},65:function(e,a,t){},67:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(23),o=t.n(r),l=(t(34),t(8)),i=t(9),s=t(11),u=t(10),m=t(13),d=t(2),h=(t(35),t(14)),p=function(e,a){return fetch("https://pruebatecnica.puntosleal.com/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}).then((function(e){return e.json()})).catch((function(e){return e}))},E=function(e,a,t){return fetch("https://pruebatecnica.puntosleal.com/api/user/my/transactions?startDate=".concat(a,"&endDate=").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return e}))},v=(t(36),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).modalRef=c.a.createRef(),e.handleClickOutside=function(a){e.modalRef&&!e.modalRef.current.contains(a.target)&&e.props.handleCerrarDialogo()},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this.props.transaccion,a=e._id,t=e.createdDate,n=e.type,r=e.value,o=e.points;return c.a.createElement("div",{className:"fondo-modal-transaccion"},c.a.createElement("div",{className:"modal-transaccion",ref:this.modalRef},c.a.createElement("h3",null,"Transacci\xf3n"),c.a.createElement("div",{className:"datos-transaccion"},c.a.createElement("div",{className:"campo-detalle-transaccion"},c.a.createElement("b",null,"ID"),c.a.createElement("span",null,a)),c.a.createElement("div",{className:"campo-detalle-transaccion"},c.a.createElement("b",null,"Fecha"),c.a.createElement("span",null,t.slice(0,10))),c.a.createElement("div",{className:"campo-detalle-transaccion"},c.a.createElement("b",null,"Valor"),c.a.createElement("span",null,r)),c.a.createElement("div",{className:"campo-detalle-transaccion"},c.a.createElement("b",null,"Puntos"),c.a.createElement("span",null,o)),c.a.createElement("div",{className:"campo-detalle-transaccion campo-tipo"},c.a.createElement("b",null,"Tipo"),c.a.createElement("span",null,n)))))}}]),t}(n.Component)),f=t(17),g=t.n(f),b=(t(54),t(55),t(56),t(24)),k=t.n(b),C=function(){return c.a.createElement("div",{className:"fondo-indicador-carga"},c.a.createElement(k.a,{color:"#ECC400"}))},y=t(28),O=(t(61),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={transacciones:[],transaccionActual:null,fechaInicio:new Date("2018-11-01").toJSON().slice(0,10),fechaFin:new Date("2018-11-15").toJSON().slice(0,10),earn:!0,redeem:!0,value:{min:0,max:5e4},points:{min:0,max:50},cargando:!1,error:""},e.handleCerrarDialogo=function(){return e.setState({transaccionActual:null})},e.handleChange=function(a){e.setState(Object(h.a)({},a.target.name,a.target.value))},e.renderTransacciones=function(){var a=e.state,t=a.transacciones,n=a.earn,r=a.redeem,o=a.value,l=a.points,i=t.filter((function(e){var a="earn"===e.type&&n||"redeem"===e.type&&r;return a&=o.min<=e.value&&e.value<=o.max,a&=l.min<=e.points&&e.points<=l.max}));return 0===i.length?c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"4"},"No hay transacciones")):i.map((function(a){return c.a.createElement("tr",{key:a._id},c.a.createElement("td",null,a._id),c.a.createElement("td",null,a.createdDate.slice(0,10)),c.a.createElement("td",null,a.type),c.a.createElement("td",{className:"ver-detalle",onClick:function(){e.setState({transaccionActual:a})}},"Ver"))}))},e.onBuscarClicked=function(){var a=e.props.token,t=e.state,n=t.fechaInicio,c=t.fechaFin;e.setState({cargando:!0}),E(a,n,c).then((function(a){100===a.code?e.setState({transacciones:a.data,cargando:!1}):(a.code,e.props.handleOnChangeToken(null),e.setState({cargando:!1}))}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.token,t=this.state,n=t.fechaInicio,c=t.fechaFin;this.setState({cargando:!0}),a&&E(a,n,c).then((function(a){100===a.code?e.setState({transacciones:a.data,cargando:!1}):(a.code,e.props.handleOnChangeToken(null),e.setState({cargando:!1}))}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.transaccionActual,n=a.fechaInicio,r=a.fechaFin,o=a.earn,l=a.redeem,i=a.value,s=a.points,u=a.cargando;return this.props.token?c.a.createElement("div",{className:"pagina-transacciones"},c.a.createElement("div",{className:"contenido-transacciones"},c.a.createElement("div",{className:"barra-filtros"},c.a.createElement("h1",{className:"titulo-transacciones"},"Transacciones"),c.a.createElement("div",{className:"fecha-inputs"},c.a.createElement("b",null,"Inicio"),c.a.createElement("input",{type:"date",name:"fechaInicio",value:n,onChange:this.handleChange,max:r}),c.a.createElement("b",null,"Fin"),c.a.createElement("input",{type:"date",name:"fechaFin",value:r,onChange:this.handleChange,min:n})),c.a.createElement("button",{className:"btn-buscar",onClick:this.onBuscarClicked},"Actualizar"),c.a.createElement("div",{className:"titulo-tipo"},"Tipo"),c.a.createElement("div",{className:"checkboxes"},c.a.createElement("div",{className:"checkbox-type"},c.a.createElement("input",{type:"checkbox",name:"earn",checked:o,onChange:function(){return e.setState({earn:!e.state.earn})}}),"earn"),c.a.createElement("div",{className:"checkbox-type"},c.a.createElement("input",{type:"checkbox",name:"redeem",checked:l,onChange:function(){return e.setState({redeem:!e.state.redeem})}}),"redeem")),c.a.createElement("div",{className:"contenedor-rango-valor"},c.a.createElement("b",null,"Rango de valor"),c.a.createElement(g.a,{step:1e3,maxValue:5e4,minValue:0,value:i,onChange:function(a){return e.setState({value:a})}})),c.a.createElement("div",{className:"contenedor-rango-valor"},c.a.createElement("b",null,"Rango de puntos"),c.a.createElement(g.a,{step:5,maxValue:50,minValue:0,value:s,onChange:function(a){return e.setState({points:a})}}))),c.a.createElement("div",{className:"contenedor-transacciones"},c.a.createElement("h1",null,"Tabla de transacciones"),c.a.createElement(y.a,{variant:"dark",className:"tabla",responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"Fecha"),c.a.createElement("th",null,"Tipo"),c.a.createElement("th",null,"Detalle"))),c.a.createElement("tbody",null,this.renderTransacciones()))),t&&c.a.createElement(v,{transaccion:t,handleCerrarDialogo:this.handleCerrarDialogo}),u&&c.a.createElement(C,null))):c.a.createElement(d.a,{to:"/"})}}]),t}(n.Component)),N=(t(65),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=a.call.apply(a,[this].concat(c))).state={email:"",password:"",error:"",cargando:!1},e.onChange=function(a){e.setState(Object(h.a)({},a.target.name,a.target.value))},e.onSubmit=function(a){a.preventDefault();var t=e.state,n=t.email,c=t.password;e.setState({cargando:!0,error:""}),p(n,c).then((function(a){e.setState({cargando:!1}),100===a.code?e.props.handleOnChangeToken(a.token):101===a.code||102===a.code||130===a.code?e.setState({error:a.message}):e.setState({error:"Ocurrio un error en el inicio de sesi\xf3n, por favor intente m\xe1s tarde"})}))},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this.state,a=e.cargando,t=e.error;e.estado;return this.props.token?c.a.createElement(d.a,{to:"/inicio"}):c.a.createElement("div",{className:"contenedor-login"},c.a.createElement("form",{className:"dialogo-login",onSubmit:this.onSubmit},c.a.createElement("h2",null,"Iniciar sesi\xf3n"),c.a.createElement("div",{className:"campos-login"},c.a.createElement("div",null,"Correo electr\xf3nico"),c.a.createElement("input",{placeholder:"Correo Electr\xf3nico",name:"email",type:"text",required:!0,onChange:this.onChange}),c.a.createElement("div",null,"Contrase\xf1a"),c.a.createElement("input",{placeholder:"Contrase\xf1a",name:"password",type:"password",required:!0,onChange:this.onChange})),t&&c.a.createElement("div",{className:"error"},t),c.a.createElement("button",{type:"submit"},"Iniciar")),a&&c.a.createElement(C,null))}}]),t}(n.Component)),S=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=a.call.apply(a,[this].concat(c))).state={token:null},e.handleOnChangeToken=function(a){return e.setState({token:a})},e}return Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(m.a,null,c.a.createElement(d.b,{path:["/","/login"]},c.a.createElement(N,{token:this.state.token,handleOnChangeToken:this.handleOnChangeToken})),c.a.createElement(d.b,{path:"/inicio"},c.a.createElement(O,{token:this.state.token,handleOnChangeToken:this.handleOnChangeToken})))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.9c5812df.chunk.js.map